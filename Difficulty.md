<div dir="rtl">
    <h1>سختی</h1>
    <p><span style="color: #999999;">سازوکاری برای هماهنگی زمان بین دو بلوک .</span></p>
    <h2>فهرست</h2>
        <hr>
    <ul>
        <li>
            <p><a href="#1">سختی شبکه</a></p>
        </li>
        <li>
            <p><a href="#2">چرا سختی شبکه مهمه؟</a></p>
        </li>
        <li>
            <p><a href="#3">سختی شبکه چه زمانی تغییر می‌کنه؟</a></p>
        </li>
        <li>
            <p><a href="#4">زمان بین بلوک‌ها به چه شکل با سختی شبکه کنترل می‌شه؟</a>
                <ul>
                    <li><a href="#4-1">مثال ساده</a></li>
                    <p><a href="#4b">معرفی سختی شبکه</a></p>
                    <li><a href="#4-2">مثال بیت‌کوین</a></li>
                </ul>
            </p>
        </li>
        <li>
            <p><a href="#5">معرفی اعداد شازنده‌شانزدهی</a></p>
        </li>
        <li>
            <p><a href="#6">سختی شبکهٔ فعلی رو کجا می‌شه پیدا کرد؟</a></p>
        </li>
    </ul>
    <hr>
    <hr>
    <h2 id="1">سختی شبکه</h2>
    <p>بدون‌اغراق می‌شه گفت یکی از بهترین و هوشمندانه‌ترین بخش‌های شبکهٔ بیت‌کوین فرآیند سختی شبکه و کارکرد اونه.</p>
    <p>تصویر زیر در یک نگاه همه‌چیز رو نشون می‌ده، که در ادامه به توضیح اون خواهیم پرداخت.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/00-difficulty.png"><br><br>
    <p>
    <strong>سختی شبکه عددیه که میزان زمانی که طول می‌کشه استخراج‌کننده‌ها بلوک جدیدی از تراکنش‌ها رو به زنجیره‌بلوک اضافه کنند، رو تنظیم می‌کنه.
    </strong></p>
    <p>برای این کار درجهٔ سختی‌ای درنظر گرفته شده تا زمان استخراج بلوک از مقدار مشخصی بیشتر یا کمتر نشه و بلوک‌ها به‌طورمیانگین در حدود ده دقیقه تولید بشن. برای اینکه سختی شبکه در بازهٔ زمانی تعریف‌شده ثابت بمونه، درجهٔ سختی تقریباً هر دو هفته اصلاح می‌شه تا این زمان همیشه ده دقیقه باقی بمونه.
        بنابراین، تا الآن متوجه شدیم که بازهٔ زمانی ثابتی بین ساخت دو بلوک داریم، که در شبکهٔ بیت‌کوین ده دقیقه‌ست و با سختی شبکه تنظیم می‌شه.</p>
    <br>
    <h2 id="2">چرا سختی شبکه مهمه؟</h2>
    <p>سختی شبکه از این جهت مهمه که تضمین می‌کنه در هر نقطه‌ای از زمان—چه وقتی که تعداد استخراج‌کننده‌های موجود در شبکه زیاد بشه و چه وقتی که تعداد اون‌ها کاهش پیدا کنه—زمان تولید هر بلوک همیشه حدود ده دقیقه خواهد بود. هرچقدر که تعداد استخراج‌کننده‌ها کم یا زیاد بشه، سختی شبکه به تناسب اون شبکه
        رو طوری تنظیم می‌کنه که تولید هر بلوک به‌طورمیانگین ده دقیقه زمان ببره. اگه سختی شبکه ثابت می‌بود، با اضافه‌شدن استخراج‌کننده‌ها زمان کمتری طول می‌کشید تا بلوک‌های جدید تولید بشن.</p>
    <br>
    <h2 id="3">سختی شبکه چه زمانی تغییر می‌کنه؟</h2>
    <p>سختی شبکه هر ۲۰۱۶ بلوک—کم‌وبیش هر دو هفته یه بار—اصلاح می‌شه. درواقع، ما ۲۰۱۶ بلوک داریم که برای تولید هرکدوم از اون‌ها تا ده دقیقه زمان صرف می‌شه و به ما زمان «تغییر سختی» رو می‌ده؛ اما نکته‌ای که وجود داره اینه که در اینجا ده دقیقه همیشه ثابت نیست بلکه به‌طورمیانگین ده دقیقه‌ست.
        به‌هرحال، برای محاسبه نیازه که ۲۰۱۶ (بلوک) رو در ۱۰ (دقیقه) ضرب کنیم، که عددی به دقیقه به‌دست میاد. حالا اگه استخراج‌کننده‌ها جوری استخراج کنن که میانگین نه دقیقه بشه، زمان تغییر سختی هم تغییر می‌کنه و می‌شه ۲۰۱۶ (بلوک) ضرب‌در ۹ (دقیقه).</p>
    <p>وقتی سختی شبکه کمتر از ده دقیقه باشه، زمان استخراج هر بلوک در ده دقیقه و در وسعت ۲۰۱۶ بلوک بیشتر از عدد یک می‌شه، به‌این‌معنی که در هر ده دقیقه یک رابطهٔ ۱٫۱ به‌وجود میاد که می‌گه در هر ده دقیقه ما یک بلوک و یک‌دهم بلوک داریم، که از این طریق به‌دست میاد:</p>
    <p dir="ltr"> expected / actual</p>
    <p dir="ltr"> 20160 / actual</p>
    <br>
    <p dir="ltr">20160/18144 = 1.11</p>
    <p>۲۰۱۶۰ برابره با ضرب ده دقیقه در ۲۰۱۶ بلوک، که در حالت ایده‌آل نیازه. ۱۸۱۴۴ برابره با ضرب نه دقیقه در ۲۰۱۶ بلوک، و نسبت دوم هم که نسبت حالت ده دقیقه به حالت نه دقیقه هست.
    </p>
    <p>حالا از روی این نسبت سختی جدید برای شبکه تعیین می‌شه، که در رابطهٔ زیر می‌بینید:</p>
    <p dir="ltr">difficulty × 1.11 = new difficulty</p>
    <p>اینجا دو شرط داریم:</p>
    <ul>
        <li> اگه عدد نسبت بزرگ‌تر از یک باشه (به‌این‌معنی که بلوک‌ها سریع‌تر از حالت ایده‌آل (ده دقیقه) استخراج بشن)، بنابراین سختی شبکه باید افزایش پیدا کنه تا بتونیم شبکه و فرآیند استخراج رو به سمت ده دقیقه سوق بدیم.</li>
        <li>اگه عدد نسبت کمتر از یک باشه (به‌این‌معنی که بلوک‌ها دیرتر از حالت ایده‌آل (ده دقیقه) استخراج بشن)، بنابراین سختی شبکه باید کاهش پیدا کنه تا بتونیم شبکه و فرآیند استخراج رو به—درست حدس زدید—ده دقیقه برسونیم.</li>
    </ul>
    <p>به‌این‌صورت، سختی، از روی ۲۰۱۶ بلوک قبلی، برای ۲۰۱۶ بلوک آینده تنظیم می‌شه تا در اون زمان، با تعداد استخراج‌کننده‌ها و میانگین زمان پیداکردن هر بلوک، دوباره سنجیده بشه.</p>
    <p>نکته: باید درنظر داشت که زمانی که سختی شبکه تنظیم می‌شه، به گونه‌ای هست که نمی‌تونه از یک محدوده بیشتر یا کمتر بره، بدین‌شکل که حداقل یک‌چهارم برابر و حداکثر چهار برابر بشه، و بیشتر از «حداکثر» و کمتر از «حداقل» ممکن نیست.</p>
    <br>
    <h2 id="4">زمان بین بلوک‌ها به چه شکل با سختی شبکه کنترل می‌شه؟</h2>
    <p>این قسمت رو با یه مثال جلو می‌بریم.</p>
    <h3 id="4-1">۱) مثال ساده</h3>
    <p>فرض کنیم من به شما تعدادی از اعداد بین ۱ تا ۱۰۰ رو می‌دم.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/01-range.png"><br><br>
    <p>شما می‌تونید در هر دقیقه یک عدد بین ۱ تا ۱۰۰ به‌صورت تصادفی انتخاب کنید. شما می‌تونید این‌قدر این انتخاب رو ادامه بدید تا به عددی که مدنظر من هست برسید.</p>
    <p>فرض می‌کنیم من عدد ۵۰ رو درنظر گرفتم.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/01-range_target.png"><br><br>
    <p>براساس اینکه شما در هر دقیقه تنها یک بار قادر به انتخاب شماره‌ای بین ۱ تا ۱۰۰ هستید، بنابراین این مورد دو دقیقه زمان می بره.</p>
    <p>اما این خیلی آسونه. پس هدف رو به ۲۰ تغییر می‌دم. حالا شما می‌تونید هر ۱/۵ بار امتحان کنید، یا به معنی اینکه هر پنج دقیقه یک بار به‌دست بیارید.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/01-range_target_20.png"><br><br>
    <p>نکته‌ای که هست، شاید شما بار اول که عدد رو انتخاب می کنید، خوش‌شانس باشید و مستقیم ۲۰ رو انتخاب کنید، ولی در بلند‌مدت به همون پنج دقیقه خواهید رسید، یعنی رسیدن به این شرایط هر پنج دقیقه به‌طول می‌انجامه.</p>
    <p>درنتیجه، برحسب میزان انتخابی که می‌تونید انجام بدید، می‌تونید از مقدار هدف برای محاسبهٔ زمان به‌دست‌آوردن عدد موردنظر استفاده کنید.</p>
    <br>
    <h2 id="4b">معرفی سختی شبکه</h2>
    <p>در اینجا سروکار با کامپیوتره و کامپیوتر می‌تونه به جای اینکه به‌طورمستقیم به هدف اشاره کنه، بیاد اون رو به تقسیماتی از محدوده‌ای از اعداد تقسیم کنه و از دل اون، اعداد جدیدی به‌دست بیاره که درنهایت به جواب یا هدف مسئله برسه.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/01-range_target_difficulty.png">
    <p dir="ltr">This new number is able to control the height of the target.</p><br><br>
    <p>این شمارهٔ جدید همون سختی شبکه‌ست، که درواقع می‌شه خیلی ساده از اون برای تغییر مقدار عدد موردنظر و به تناسب اون طول زمان موردنظر استفاده کرد. تمام این فرآیند در رابطهٔ زیر نشون داده شده:
    </p>
    <p dir="ltr">target = targetmax/difficulty</p>
    <p>نمونه‌های مختلفی رو برای مثال در پایین می‌بینیم که چطور می‌شه با تغییر سختی شبکه طول پیداکردن هدف رو سخت‌تر کرد:</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/01-range_target_difficulty_examples.png">
    <p dir="ltr">The higher the difficulty, the lower the target.</p><br><br>
    <h3 id="4-2">۲) مثال بیت‌کوین</h3>
    <p>برای بیت‌کوین، مشابه مثال ساده‌ای که در قبل بود کار می‌کنه. به‌این‌منظور، فرآیند هشینگ کاندید بلوک انجام می‌گیره تا استخراج‌کننده‌ها بتونن بهترین شانس‌های خودشون رو امتحان کنن تا به عدد موردنظر برسن. در اینجا استخراج‌کننده‌ها امیدوارن که بتونن محدودهٔ کمتری رو
        انجام بدن تا سریع‌تر به عدد موردنظر برسن.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/02-bitcoin_target_hash.png">
    <p dir="ltr">And seeing as miners are able to generate thousands of numbers (hash values) per minute, bitcoin uses ridiculously big numbers.</p><br><br>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/02-bitcoin_range.png">
    <p dir="ltr">The numbers in bitcoin are just on a much bigger scale.</p><br><br>
    <p>ازاونجایی‌که هزاران استخراج‌کننده در حال تلاش برای به‌دست‌آوردن شانس خودشون هستن، بنابراین این مقدار طوری تغییر می‌کنه که اطمینان حاصل بشه با میزان کم و زیادشدن استخراج‌کننده‌ها به اندازهٔ ده دقیقه به‌طول می‌انجامه. درنتیجه، عددهای هدف متناسب با تعداد استخراج‌کننده‌ها متغییر هستن.
    </p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/02-bitcoin_range_target.png">
    <p dir="ltr">Even though that difficulty number looks big, the target is still absurdly difficult to get under. It’s like a lottery.</p><br><br>
    <br>
    <h2 id="5">معرفی اعداد شازنده‌شانزدهی</h2>
    <p>ازاونجایی‌که اعدادی که ما با اون‌ها در این شبکه سروکار داریم اعداد بزرگی هستن، کامپیوتر ترجیح می‌ده اون‌ها رو به شکل شازنده‌شانزدهی کار کنه.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/02-bitcoin_range_target_hex.png"><br><br>
    <p>به‌این‌صورت می‌شه که بعد می‌بینیم ارزش هش هر بلوک یک چیزی شبیه به این می‌شه:</p>
    <p>000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506</p>
    <p>این شازنده‌شانزدهیه؛ درواقع همون عدده که به‌صورت شازنده‌شانزدهی دراومده. بنابراین، استخراج‌کننده‌ها تلاش می‌کنن تا به هدف شازنده‌شانزدهی موردنظر برسن.</p>
    <p>شما به‌راحتی می‌تونید اعداد شازنده‌شانزدهی رو به اعداد معمولی یا همون ده‌دهی تبدیل کنید.</p>
    <br>
    <table>
        <tbody>
            <tr>
                <th>Hexadecimal</th>
                <td>000000000004864c000000000000000000000000000000000000000000000000</td>
            </tr>
            <tr>
                <th>Decimal</th>
                <td>1861311314983800126815643622927230076368334845814253369901973504</td>
            </tr>
        </tbody>
        <caption>
            Target for block 100,000
        </caption>
    </table>
    <br>
    <table>
        <tbody>
            <tr>
                <th>Hexadecimal</th>
                <td>000000000003ba27aa200b1cecaad478d2b00432346c3f1f3986da1afd33e506</td>
            </tr>
            <tr>
                <th>Decimal</th>
                <td>1533267872647776902154320487930659211795065581998445848740226310</td>
            </tr>
        </tbody>
        <caption>
            Hash for block 100,000
        </caption>
    </table>
    <br>
    <p>به همین دلیل، معمولاً دیده می‌شه که عدد موردنظر برای به‌دست‌آوردن دارای دسته‌ای از اعداد و حروفه.
    </p>
    <p>این نکته رو نباید فراموش کرد که از لحاظ ارزش اعداد ده‌دهی با فرم شازنده‌شانزدهی یکی هستن و شما می‌تونید به‌راحتی اون‌ها رو به یکدیگه تبدیل کنید.</p>
    <p>اعداد سختی شبکه در قالب اعداد اعشاری داده می‌شن، درحالی‌که شما دارید می‌بینید که هش مورد نظر براساس شازنده‌شانزدهی داده شده. اما این ربطی نداره. شما می‌تونید شازنده‌شانزدهی رو دوباره به ده‌دهی تبدیل کنید و ببینید که درنهایت هر دو حالت نوشتاری اعداد
        سختی شبکهٔ یکسانی دارن.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/blockheader_hexadecimal_decimal.png">
    <p dir="ltr">Block 100,000 header. The target is hexadecimal, but it is stored in a compact format in the block header (called bits).</p>
    <br><br>
    <br>
    <h2 id="6">سختی شبکهٔ فعلی رو کجا می‌شه پیدا کرد؟</h2>
    <p>می‌شه با واردکردن دستور getdifficulty در کلاینت بیت‌کوین به این موضوع رسید.</p>
    <p>همین‌طور می‌شه سختی شبکه رو با دستور getmininginfo دید.</p>
    <br><br><img src="https://learnmeabitcoin.com/beginners/images/difficulty/png/getdifficulty.png"><br><br>
    <p>بااین‌حال، اگه شما کلاینت بیت‌کوین رو ندارید، همیشه می‌تونید سختی شبکه رو از آدرس زیر ببینید:</p>
    <p><a href="http://chainquery.com/bitcoin-api/getdifficulty">http://chainquery.com/bitcoin-api/getdifficulty</a></p>
    <p>همین‌طور اگه علاقه‌مند هستید که بدونید سختی شبکه در طول زمان چطور تغییر می‌کنه، می‌تونید از سایت زیر استفاده کنید، که به همراه چارت هست:</p>
    <p><a href="https://bitcoinwisdom.com/bitcoin/difficulty">https://bitcoinwisdom.com/bitcoin/difficulty</a></p>
    <p><a href="https://learnmeabitcoin.com/beginners/difficulty">منبع</a></p>
    <p>از تکنولوژی لذت ببریم!</p>
    <p><a href="https://github.com/rezatajari/learnmeabitcoin/blob/master/03.%20Transactions.md">رفتن به مطلب بعد</a></p>
</div>
